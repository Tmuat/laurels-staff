{% extends "base.html" %}

{% load static i18n %}

{% block head_title %}{% trans "Accept Invite" %}{% endblock head_title %}

{% block body_extra %}
class="loading authentication-bg" data-layout-config='{"leftSideBarTheme":"dark","layoutBoxed":false, "leftSidebarCondensed":false, "leftSidebarScrollable":false,"darkMode":false, "showRightSidebarOnStart": true}'
{% endblock body_extra %}

{% block page_content %}

<div class="account-pages pt-5 pb-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="card">

                    <!-- Logo -->
                    <div class="card-header pt-2 pb-2 text-center bg-success">
                        <a href="">
                            <span><img src="{% static 'custom/images/logo.png' %}" alt="laurels logo"
                                    height="70"></span>
                        </a>
                    </div>

                    <div class="card-body p-4">
                        <div class="text-center">
                            <h4 class="">OTP Setup</h4>
                        </div>
                        <p class="text-center">{% blocktrans trimmed %}You must use a token generator, please use your
                            smartphone to scan the QR code below. The reccommended generator is 'Google Authenticator'. 
                            Then, enter the token generated by the app.{% endblocktrans %}</p>
                        <div>
                            <p class="text-center">
                                <img src="{% url 'accounts:qr' %}" alt="QR Code"/>
                            </p>
                        </div>
                        <form method="post" action="{% url 'invitations:otp_setup' %}" class="text-center">
                            {% csrf_token %}
                            {% if no_error %}
                            <div id="div_id_token" class="form-group">
                                <label for="id_token" class=" requiredField">
                                    Token<span class="asteriskField">*</span>
                                </label>
                                <div class="">
                                    <input type="number" name="token" min="0" max="999999" autofocus="autofocus" inputmode="numeric"
                                        autocomplete="one-time-code" class="numberinput form-control" required="" id="id_token">
                                </div>
                            </div>
                            {% else %}
                            <div id="div_id_token" class="form-group">
                                <label for="id_token" class=" requiredField">
                                    Token<span class="asteriskField">*</span>
                                </label>
                                <div class="">
                                    <input type="number" name="token" min="0" max="999999" autofocus="autofocus" inputmode="numeric"
                                        autocomplete="one-time-code" class="numberinput form-control is-invalid" required=""
                                        id="id_token">
                                    <div id="id_token_feedback" class="invalid-feedback">
                                        Invalid Token.
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            <div class="mb-3 text-center">
                                <button type="submit" class="btn btn-success">{% trans "Add Device" %}</button>
                            </div>
                        </form>
                    </div>
                    <!-- end card-body -->
                </div>
                <!-- end card -->
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
    </div>
    <!-- end container -->
</div>
<!-- end page -->
<footer class="footer footer-alt">
    {% now "Y" %} Â© Laurels - Designed By <a href="mailto: Thomas_Muat@hotmail.com">Thomas Muat</a>
</footer>

{% endblock %}